(function(c,U){"use strict";function B(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E;function J(){if(E)return S;E=1;var e=c,s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(m,l,h){var f,x={},v=null,g=null;h!==void 0&&(v=""+h),l.key!==void 0&&(v=""+l.key),l.ref!==void 0&&(g=l.ref);for(f in l)n.call(l,f)&&!i.hasOwnProperty(f)&&(x[f]=l[f]);if(m&&m.defaultProps)for(f in l=m.defaultProps,l)x[f]===void 0&&(x[f]=l[f]);return{$$typeof:s,type:m,key:v,ref:g,props:x,_owner:o.current}}return S.Fragment=r,S.jsx=a,S.jsxs=a,S}var A;function W(){return A||(A=1,R.exports=J()),R.exports}var t=W(),C={},D;function V(){if(D)return C;D=1;var e=U;return C.createRoot=e.createRoot,C.hydrateRoot=e.hydrateRoot,C}var z=V();const G=B(z);function P(e){var s,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(s=0;s<o;s++)e[s]&&(r=P(e[s]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function w(){for(var e,s,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(s=P(e))&&(n&&(n+=" "),n+=s);return n}function H({children:e,id:s,className:r,...n}){const o=w(["layout",r]);return t.jsx("div",{className:o,id:s,...n,children:e})}function Y({id:e,className:s,children:r,...n}){const o=w(["sidebar-section",e,s]);return t.jsx("section",{id:e,className:o,...n,children:r})}function K({children:e,type:s,isActive:r}){const n=w(r?"active":null,`sidebar-link ${s}-link`);return s==="annotation"?t.jsx("div",{className:n,children:e}):t.jsx("div",{className:n,children:e})}function N({children:e,className:s,...r}){const n=w("sidebar",s);return t.jsx("aside",{id:"sidebar",className:n,...r,children:e})}N.Section=Y,N.Link=K;function Q({id:e,className:s,children:r,...n}){const o=w(["toolbar",e,s]);return t.jsx("div",{id:e,className:o,...n,children:r})}function X({variant:e="primary",size:s="medium",className:r,children:n,...o},i){const a=w("btn",`btn-${e}`,`btn-${s}`,r);return t.jsx("button",{ref:i,className:a,...o,children:n})}const k=c.forwardRef(X);function Z({variant:e="primary",size:s="medium",className:r,children:n,...o},i){const a=w("btn","btn-toolbar",`btn-${e}`,`btn-${s}`,r);return t.jsx("button",{ref:i,className:a,...o,children:n})}const ee=c.forwardRef(Z),te="section";function se({as:e,children:s,...r}){const n=e||te;return t.jsx(n,{...r,children:s})}function j({children:e}){return t.jsx("footer",{id:"toolbarStack",className:"toolbar-stack",children:e})}j.Toolbar=Q,j.Button=ee,j.Area=se;function re({...e},s){return t.jsx("textarea",{...e,ref:s})}c.forwardRef(re);function I({status:e,className:s}){const n=(()=>{switch(e){case"in-development":return{text:"In Development",className:"status-development"};case"reviews-requested":return{text:"Reviews Requested",className:"status-requested"};case"in-review":return{text:"In Review",className:"status-review"};case"submitted-for-development":return{text:"Submitted For Development",className:"status-submitted"};case"pending":return{text:"Pending",className:"status-pending"};case"in-progress":return{text:"In Progress",className:"status-progress"};case"resolved":return{text:"Resolved",className:"status-resolved"};default:return{text:"Unknown",className:"status-unknown"}}})();return t.jsx("span",{className:w("badge",n.className,s),children:n.text})}function ne({value:e,max:s=100,label:r,showPercentage:n=!0,className:o}){const i=Math.min(Math.max(e/s*100,0),100);return t.jsxs("div",{className:w("progress-bar",o),children:[r&&t.jsxs("div",{className:"progress-label",children:[r,n&&t.jsxs("span",{className:"progress-percentage",children:[Math.round(i),"%"]})]}),t.jsx("div",{className:"progress-track",children:t.jsx("div",{className:"progress-fill",style:{width:`${i}%`}})})]})}function oe(e){const[s,r]=c.useState("in-development"),[n,o]=c.useState(!0),[i,a]=c.useState(null),[m,l]=c.useState(null),[h,f]=c.useState(null),x="workflow-state.json",v=c.useCallback(async()=>{try{if(o(!0),a(null),!await e.fileOperations.fileExists(x)){r("in-development"),l(new Date().toISOString());return}const u=await e.fileOperations.readFile(x),d=JSON.parse(u);r(d.state),l(d.timestamp),f(d.lastCaptureResult||null)}catch(p){console.error("Failed to load workflow state:",p),a("Failed to load workflow state"),r("in-development")}finally{o(!1)}},[e.fileOperations,x]),g=c.useCallback(async(p,u)=>{try{a(null);const d=new Date().toISOString(),b={state:p,timestamp:d,...u};await e.fileOperations.writeFile(x,JSON.stringify(b,null,2)),r(p),l(d),f(b.lastCaptureResult||null)}catch(d){const b=d instanceof Error?d.message:"Unknown error occurred";throw console.error("Failed to save workflow state:",d),a(`Failed to save workflow state: ${b}`),d}},[e.fileOperations,x]),y=c.useCallback(async()=>{await g("in-development")},[g]);return c.useEffect(()=>{v()},[v]),{workflowState:s,isLoading:n,error:i,lastUpdated:m,lastCaptureResult:h,updateWorkflowState:g,resetWorkflow:y,reload:v}}function ae(e){const[s,r]=c.useState([]),[n,o]=c.useState(!1),[i,a]=c.useState(null),[m,l]=c.useState(null),h="annotations.json",f=c.useCallback(async()=>{try{if(o(!0),a(null),!await e.fileOperations.fileExists(h)){r([]);return}const u=await e.fileOperations.readFile(h);try{const d=JSON.parse(u);Array.isArray(d)?r(d):d.session&&Array.isArray(d.session.annotations)?r(d.session.annotations):Array.isArray(d.annotations)?r(d.annotations):r([])}catch(d){console.error("Failed to parse annotation data:",d),a("Failed to load annotations - corrupted data"),r([])}}catch(p){console.error("Failed to load annotations:",p),a("Failed to load annotations"),r([])}finally{o(!1)}},[e.fileOperations,h]),x=c.useCallback(async p=>{try{a(null);const u=s.map(d=>d.id===p?{...d,status:"resolved"}:d);await e.fileOperations.writeFile(h,JSON.stringify(u,null,2)),r(u)}catch(u){throw console.error("Failed to update annotation:",u),a("Failed to update annotation status"),u}},[s,e.fileOperations,h]),v=c.useCallback(async p=>{try{a(null);const u=s.map(d=>d.id===p?{...d,status:"in-progress"}:d);await e.fileOperations.writeFile(h,JSON.stringify(u,null,2)),r(u)}catch(u){throw console.error("Failed to update annotation:",u),a("Failed to update annotation status"),u}},[s,e.fileOperations,h]),g=c.useCallback(async p=>{try{if(l(0),a(null),p&&typeof fetch<"u"){const u=await fetch(`${p}/api/annotations/download`);if(!u.ok)throw new Error(`Network error: ${u.statusText}`);l(50);const d=await u.json(),b=`annotations-session-${d.session.sessionId}.zip`;return await e.fileOperations.writeFile(b,JSON.stringify(d,null,2)),r(d.session.annotations),l(100),setTimeout(()=>l(null),2e3),b}else return await f(),null}catch(u){throw console.error("Failed to download annotations:",u),a(`Failed to download annotations: ${u instanceof Error?u.message:"Unknown error"}`),l(null),u}},[e.fileOperations,f]);c.useEffect(()=>{f()},[f]);const y={total:s.length,pending:s.filter(p=>p.status==="pending").length,inProgress:s.filter(p=>p.status==="in-progress").length,resolved:s.filter(p=>p.status==="resolved").length,percentComplete:s.length>0?Math.round(s.filter(p=>p.status==="resolved").length/s.length*100):0};return{annotations:s,isLoading:n,error:i,downloadProgress:m,progressStats:y,loadAnnotations:f,markAsResolved:x,markAsInProgress:v,downloadAnnotations:g}}function ie(e){const[s,r]=c.useState(!1),[n,o]=c.useState(""),[i,a]=c.useState(null),[m,l]=c.useState(null),h=c.useCallback(async()=>!!e.config,[e.config]),f=c.useCallback(async v=>{try{if(r(!0),a(null),o("Validating configuration..."),!await h())throw new Error("Configuration required - please configure fixtures");o("Discovering routes..."),await new Promise(u=>setTimeout(u,500)),o("Capturing screenshots...");const y=await e.screenshotService.captureRoutes(v);o("Processing results..."),await new Promise(u=>setTimeout(u,300));const p={success:!0,screenshotCount:y.screenshots.length,outputPath:y.outputDirectory||"/temp/screenshots",deploymentInstructions:["1. Deploy to staging server","2. Share URL with clients","3. Wait for client feedback"]};return l(p),o("Screenshots captured successfully!"),p}catch(g){const y=g instanceof Error?g.message:"Unknown error occurred";throw console.error("Screenshot capture failed:",g),a(`Screenshot capture failed: ${y}`),o("Screenshot capture failed!"),g}finally{r(!1),setTimeout(()=>o(""),3e3)}},[e.screenshotService,h]),x=c.useCallback(async()=>{const v=[];return e.config||v.push("Configuration not found - please configure protobooth plugin"),v},[e.config]);return{isCapturing:s,captureProgress:n,error:i,lastCaptureResult:m,captureScreenshots:f,validateConfiguration:h,getValidationErrors:x}}function le({getValidationErrors:e,setValidationErrors:s,updateWorkflowState:r,captureScreenshots:n,downloadAnnotations:o,resetWorkflow:i}){const a=c.useCallback(async()=>{try{const h=await e();if(h.length>0){s(h);return}await r("reviews-requested");try{await n({appUrl:window.location.origin,routerType:"vite",authState:"authenticated"})}catch(f){console.error("Failed to capture screenshots:",f)}}catch(h){console.error("Failed to request review:",h)}},[e,s,r,n]),m=c.useCallback(async()=>{try{await o(),await r("submitted-for-development")}catch(h){console.error("Failed to download annotations:",h)}},[o,r]),l=c.useCallback(async()=>{try{await i()}catch(h){console.error("Failed to reset workflow:",h)}},[i]);return{handleRequestReview:a,handleDownloadAnnotations:m,handleResetWorkflow:l}}function _({title:e,message:s,details:r,className:n,onDismiss:o,"data-testid":i}){return t.jsxs("div",{className:w("error-card",n),"data-testid":i,children:[t.jsxs("div",{className:"error-header",children:[t.jsx("h4",{className:"error-title",children:e}),o&&t.jsx("button",{onClick:o,className:"btn-dismiss","aria-label":"Dismiss error",children:"Ã—"})]}),t.jsxs("div",{className:"error-body",children:[t.jsx("p",{className:"error-text","data-testid":`${i}-message`,children:s}),r&&r.length>0&&t.jsx("div",{className:"error-details",children:t.jsx("ul",{className:"list-unstyled",children:r.map((a,m)=>t.jsx("li",{className:"list-item",children:a},m))})})]})]})}function ce({validationErrors:e,isCapturing:s,captureProgress:r,onRequestReview:n}){return t.jsxs("div",{className:"workflow-state","data-testid":"workflow-in-development",children:[t.jsx("h2",{"data-testid":"workflow-state-title",children:"In Development"}),t.jsx("p",{children:"Ready to request client review of your prototype."}),e.length>0&&t.jsx(_,{title:"Configuration Required",message:"Please configure fixtures before requesting review",details:e,"data-testid":"configuration-error"}),t.jsx("div",{className:"actions",children:t.jsx(k,{onClick:n,disabled:s||e.length>0,className:"btn-primary","data-testid":"request-review-button",children:s?"Capturing Screenshots...":"Request Review"})}),r&&t.jsx("div",{className:"progress-info","data-testid":"capture-progress",children:t.jsx("p",{children:r})})]})}function de({screenshotCount:e,outputPath:s,instructions:r,className:n,"data-testid":o}){const[i,a]=c.useState(!1),m=async()=>{try{await navigator.clipboard.writeText(s),a(!0),setTimeout(()=>a(!1),2e3)}catch(l){console.error("Failed to copy path:",l)}};return t.jsxs("div",{className:w("deployment-card",n),"data-testid":o,children:[t.jsxs("div",{className:"summary",children:[t.jsx("h3",{children:"Screenshots Captured Successfully!"}),t.jsxs("p",{children:[t.jsxs("strong",{children:[e," screenshots"]})," captured and saved to:"]}),t.jsxs("div",{className:"path-display",children:[t.jsx("code",{children:s}),t.jsx("button",{onClick:m,className:"btn-copy",title:"Copy path to clipboard",children:i?"âœ“":"ðŸ“‹"})]})]}),t.jsxs("div",{className:"steps-section",children:[t.jsx("h4",{children:"Next Steps:"}),t.jsx("ol",{className:"list-ordered",children:r.map((l,h)=>t.jsx("li",{className:"list-item",children:l},h))})]}),t.jsxs("div",{className:"tips-section",children:[t.jsx("h4",{children:"Deployment Tips:"}),t.jsxs("ul",{className:"list-unstyled",children:[t.jsx("li",{children:"Upload all files in the output directory to your staging server"}),t.jsxs("li",{children:["Ensure the annotation interface is accessible at ",t.jsx("code",{children:"/protobooth/annotate"})]}),t.jsx("li",{children:"Share the staging URL with your clients for review"}),t.jsx("li",{children:'Return here to download annotations when clients click "Publish"'})]})]})]})}function ue({captureProgress:e,lastCaptureResult:s,isCapturing:r,onRecapture:n}){return t.jsxs("div",{className:"workflow-state","data-testid":"workflow-reviews-requested",children:[t.jsx("h2",{"data-testid":"workflow-state-title",children:"Reviews Requested"}),!s&&t.jsx("p",{children:"Screenshots are being captured..."}),e&&t.jsx("div",{className:"progress-info","data-testid":"capture-progress",children:t.jsx("p",{children:e})}),s&&t.jsxs(t.Fragment,{children:[t.jsx(de,{screenshotCount:s.screenshotCount,outputPath:s.outputPath,instructions:s.deploymentInstructions||[],"data-testid":"deployment-instructions"}),t.jsx("div",{className:"actions",children:t.jsx(k,{onClick:n,disabled:r,"data-testid":"recapture-button",children:r?"Recapturing...":"Recapture Screenshots"})})]})]})}function he({downloadProgress:e,onDownloadAnnotations:s,onResetWorkflow:r}){return t.jsxs("div",{className:"workflow-state","data-testid":"workflow-in-review",children:[t.jsx("h2",{"data-testid":"workflow-state-title",children:"In Review"}),t.jsx("p",{children:"Waiting for client feedback on staging server."}),t.jsxs("div",{className:"actions",children:[t.jsx(k,{onClick:s,disabled:e!==null,"data-testid":"download-annotations-button",children:e!==null?`Downloading... ${e}%`:"Download Annotations"}),t.jsx(k,{onClick:r,variant:"secondary","data-testid":"start-new-review-button",children:"Start New Review"})]})]})}function F({annotation:e,onMarkAsResolved:s,onMarkAsInProgress:r}){const[n,o]=c.useState(!1),i=async()=>{try{o(!0),await s(e.id)}catch(l){console.error("Failed to mark as resolved:",l)}finally{o(!1)}},a=async()=>{try{o(!0),await r(e.id)}catch(l){console.error("Failed to mark as in progress:",l)}finally{o(!1)}},m=()=>{switch(e.priority){case"high":return"priority-high";case"medium":return"priority-medium";case"low":return"priority-low";default:return""}};return t.jsxs("div",{className:w("annotation-item",m()),children:[t.jsxs("div",{className:"item-header",children:[t.jsxs("div",{className:"meta-info",children:[t.jsx("span",{className:"route-label",children:e.route}),t.jsx("span",{className:"viewport-label",children:e.viewport}),t.jsxs("span",{className:w("priority-badge",`priority-${e.priority}`),children:[e.priority," priority"]})]}),t.jsx(I,{status:e.status})]}),t.jsx("div",{className:"item-content",children:t.jsx("p",{children:e.content})}),t.jsxs("div",{className:"position-info",children:["Position: x=",e.position.x,", y=",e.position.y]}),t.jsxs("div",{className:"actions",children:[e.status==="pending"&&t.jsx(k,{onClick:a,disabled:n,size:"small",variant:"secondary",children:"Start Working"}),(e.status==="pending"||e.status==="in-progress")&&t.jsx(k,{onClick:i,disabled:n,size:"small","data-testid":`resolve-annotation-${e.id}`,children:"Mark as Resolved"})]}),t.jsx("div",{className:"timestamp",children:e.timestamp instanceof Date?e.timestamp.toISOString():new Date(e.timestamp).toISOString()})]})}function pe({annotations:e,onMarkAsResolved:s,onMarkAsInProgress:r,className:n,"data-testid":o}){if(e.length===0)return t.jsx("div",{className:w("annotation-list","list-empty",n),"data-testid":o,children:t.jsx("p",{children:"No annotations available."})});const i=e.reduce((a,m)=>{const l=m.status;return a[l]||(a[l]=[]),a[l].push(m),a},{});return t.jsxs("div",{className:w("annotation-list",n),"data-testid":o,children:[i.pending&&i.pending.length>0&&t.jsxs("div",{className:"annotation-group",children:[t.jsxs("h3",{children:["Pending (",i.pending.length,")"]}),i.pending.map(a=>t.jsx(F,{annotation:a,onMarkAsResolved:s,onMarkAsInProgress:r},a.id))]}),i["in-progress"]&&i["in-progress"].length>0&&t.jsxs("div",{className:"annotation-group",children:[t.jsxs("h3",{children:["In Progress (",i["in-progress"].length,")"]}),i["in-progress"].map(a=>t.jsx(F,{annotation:a,onMarkAsResolved:s,onMarkAsInProgress:r},a.id))]}),i.resolved&&i.resolved.length>0&&t.jsxs("div",{className:"annotation-group",children:[t.jsxs("h3",{children:["Resolved (",i.resolved.length,")"]}),i.resolved.map(a=>t.jsx(F,{annotation:a,onMarkAsResolved:s,onMarkAsInProgress:r},a.id))]})]})}function fe({progressStats:e,annotations:s,onMarkAsResolved:r,onMarkAsInProgress:n,onResetWorkflow:o}){return t.jsxs("div",{className:"workflow-state","data-testid":"workflow-submitted-for-development",children:[t.jsx("h2",{"data-testid":"workflow-state-title",children:"Submitted For Development"}),t.jsxs("p",{"data-testid":"annotations-count",children:[e.total," annotations ready for resolution."]}),e.total>0&&t.jsx(ne,{value:e.resolved,max:e.total,label:`${e.resolved} of ${e.total} annotations resolved`,className:"progress-bar","data-testid":"resolution-progress"}),t.jsx(pe,{annotations:s,onMarkAsResolved:r,onMarkAsInProgress:n,"data-testid":"annotation-list"}),t.jsx("div",{className:"actions",children:t.jsx(k,{onClick:o,"data-testid":"start-new-review-cycle-button",children:"Start New Review Cycle"})})]})}const me={readFile:async e=>e.includes("workflow-state.json")?JSON.stringify({state:"in-development",timestamp:new Date().toISOString()}):e.includes("annotations.json")?JSON.stringify([]):"{}",writeFile:async(e,s)=>{},fileExists:async e=>e.includes("protobooth.config.json")},we={captureRoutes:async()=>({screenshots:[{route:"/",viewport:"desktop",filePath:"/temp/home-desktop.png",dimensions:{width:1920,height:1080},timestamp:new Date},{route:"/",viewport:"mobile",filePath:"/temp/home-mobile.png",dimensions:{width:375,height:667},timestamp:new Date}],injectedFixtures:{auth:null},fixtureInjectionLog:[],totalRoutes:1,totalScreenshots:2})},xe={getAuthFixture:()=>null,getGlobalState:()=>{}};function ve(){return t.jsxs(N,{children:[t.jsx(N.Section,{id:"title",children:t.jsx("h1",{children:"Screenshots"})}),t.jsxs(N.Section,{id:"nav",children:[t.jsx(N.Link,{type:"screenshot",isActive:!0,children:"Screenshot 1"}),t.jsx(N.Link,{type:"screenshot",children:"Screenshot 2"}),t.jsx(N.Link,{type:"screenshot",children:"Screenshot 3"})]})]})}function ge(){return t.jsx(j.Toolbar,{className:"flex justify-between",id:"toolMenu",children:t.jsxs(j.Area,{children:[t.jsx(j.Button,{children:"&"}),t.jsx(j.Button,{children:"&"}),t.jsx(j.Button,{children:"&"}),t.jsx(j.Button,{children:"&"})]})})}function je(){const e=w("flex","justify-between");return t.jsxs(j.Toolbar,{className:e,id:"navMenu",children:[t.jsx(j.Button,{children:"Prev"}),t.jsx("span",{children:"1/100"}),t.jsx(j.Button,{children:"Next"})]})}function ye(){return t.jsxs(j,{children:[t.jsx(ge,{}),t.jsx(je,{})]})}function be({fileOperations:e=me,screenshotService:s=we,fixtureManager:r=xe,config:n}={}){const{workflowState:o,isLoading:i,error:a,lastCaptureResult:m,updateWorkflowState:l,resetWorkflow:h}=oe({fileOperations:e}),{annotations:f,error:x,progressStats:v,markAsResolved:g,markAsInProgress:y,downloadAnnotations:p,downloadProgress:u}=ae({fileOperations:e}),{isCapturing:d,captureProgress:b,error:Ce,lastCaptureResult:Re,captureScreenshots:Fe,getValidationErrors:O}=ie({fixtureManager:r,screenshotService:s,fileOperations:e,config:n}),[Oe,T]=c.useState([]);c.useEffect(()=>{O().then(T)},[O,o]);const{handleRequestReview:L,handleDownloadAnnotations:Ee,handleResetWorkflow:q}=le({getValidationErrors:O,setValidationErrors:T,updateWorkflowState:l,captureScreenshots:Fe,downloadAnnotations:p,resetWorkflow:h}),Ae=()=>{if(i)return t.jsx("div",{className:"loading-state",children:t.jsx("p",{children:"Loading workflow state..."})});const De=Re||m;switch(o){case"in-development":return t.jsx(ce,{validationErrors:Oe,isCapturing:d,captureProgress:b,onRequestReview:L});case"reviews-requested":return t.jsx(ue,{captureProgress:b,lastCaptureResult:De,isCapturing:d,onRecapture:L});case"in-review":return t.jsx(he,{downloadProgress:u,onDownloadAnnotations:Ee,onResetWorkflow:q});case"submitted-for-development":return t.jsx(fe,{progressStats:v,annotations:f,onMarkAsResolved:g,onMarkAsInProgress:y,onResetWorkflow:q});default:return t.jsxs("div",{className:"workflow-state",children:[t.jsx("h2",{children:"Unknown State"}),t.jsx("p",{children:"Workflow is in an unknown state."})]})}},M=a||x||Ce;return t.jsxs(H,{id:"protobooth-resolve",className:"resolve-app","data-testid":"resolve-app",children:[t.jsx(ve,{}),t.jsx(ye,{}),t.jsxs("div",{className:"header",children:[t.jsx("h1",{children:"protobooth Development Interface"}),t.jsx(I,{status:o,"data-testid":"workflow-status"})]}),t.jsxs("div",{className:"content",children:[M&&t.jsx(_,{title:"Error",message:M,className:"error-message","data-testid":"general-error"}),Ae()]})]})}const Ne=(e="/protobooth/api")=>({readFile:async s=>{const r=await fetch(`${e}/files/${encodeURIComponent(s)}`);if(!r.ok)throw new Error(`File not found: ${s}`);return r.text()},writeFile:async(s,r)=>{if(!(await fetch(`${e}/files/${encodeURIComponent(s)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:r})})).ok)throw new Error(`Failed to write file: ${s}`)},fileExists:async s=>(await fetch(`${e}/files/${encodeURIComponent(s)}`,{method:"HEAD"})).ok}),ke=(e="/protobooth/api")=>({captureRoutes:async s=>{const r=await fetch(`${e}/screenshots/capture`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){const n=await r.text();throw new Error(`Screenshot capture failed: ${n}`)}return r.json()}}),Se=e=>({getAuthFixture:s=>e.fixtures?.auth?.[s]??null,getGlobalState:()=>e.fixtures?.globalState});function $(){const e=window.__PROTOBOOTH_CONFIG__||{},s=e.apiBasePath||"/protobooth/api",r=Ne(s),n=ke(s),o=Se(e),i=document.getElementById("protobooth-root");if(!i)throw new Error("Root element #protobooth-root not found");G.createRoot(i).render(t.jsx(c.StrictMode,{children:t.jsx(be,{fileOperations:r,screenshotService:n,fixtureManager:o,config:e})}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",$):$()})(React,ReactDOM);
